(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[520],{970:(e,t,r)=>{Promise.resolve().then(r.bind(r,9690))},2376:(e,t,r)=>{"use strict";r.d(t,{A:()=>o});var a=r(3464);let n=()=>localStorage.getItem("token"),s=a.A.create({baseURL:"https://adminapi.kvkd.tj/",headers:"application/json"});s.interceptors.request.use(e=>{let t=n();return t&&(e.headers.Authorization="Bearer ".concat(t)),e},e=>Promise.reject(e)),s.interceptors.response.use(e=>e,e=>{var t;return(null==(t=e.response)?void 0:t.status)===401&&(document.location.href="/login",console.warn("Unauthorized, redirecting to login...")),Promise.reject(e)});let o=s},4871:(e,t,r)=>{"use strict";r.d(t,{A:()=>n});var a=r(5155);function n(e){let{title:t,error:r,id:n,type:s="text",value:o,required:i,placeholder:l,classNameLabel:c,classNameTitle:u,classNameInput:d,classNameError:m,onChange:h}=e;return(0,a.jsxs)("label",{htmlFor:n,className:"input ".concat(c||""),children:[(0,a.jsxs)("h3",{className:" ".concat(u||""),children:[t," ",(0,a.jsx)("span",{children:i?"*":""})]}),(0,a.jsx)("input",{className:"".concat(d||""),type:s,placeholder:l,id:n,onChange:e=>h(e.target.value),value:o}),(0,a.jsx)("p",{style:{opacity:(null==r||r[n],1)},className:"".concat(m||"")})]})}r(2115)},5695:(e,t,r)=>{"use strict";var a=r(8999);r.o(a,"redirect")&&r.d(t,{redirect:function(){return a.redirect}}),r.o(a,"useParams")&&r.d(t,{useParams:function(){return a.useParams}}),r.o(a,"usePathname")&&r.d(t,{usePathname:function(){return a.usePathname}}),r.o(a,"useRouter")&&r.d(t,{useRouter:function(){return a.useRouter}})},8262:(e,t,r)=>{"use strict";r.d(t,{t:()=>o,x:()=>s});var a=r(2376),n=r(5453);let s=(0,n.v)((e,t)=>({data:{},errors:{},setData:(t,r)=>e(e=>({data:{...e.data,[t]:r}})),setClear:()=>e(()=>({data:{}})),setDataMony:t=>e(()=>({data:t})),resetErrors:()=>e({errors:{}}),validate:r=>{let{data:a}=t(),n={};return Object.keys(r).forEach(e=>{let t=r[e],s=a[e];if(t.required&&(""===s||null==s)){n[e]=t.message||" Ин ҷои ҳатмист";return}if("string"==typeof s){if(t.minLength&&s.length<t.minLength){n[e]=t.message||"Камтар аз ".concat(t.minLength," аломат набояд бошад");return}if(t.maxLength&&s.length>t.maxLength){n[e]=t.message||"Аз ".concat(t.maxLength," аломат зиёд набояд бошад");return}if(t.pattern&&!t.pattern.test(s)){n[e]=t.message||"Формати нодуруст";return}}if("number"==typeof s){if(void 0!==t.min&&s<t.min){n[e]=t.message||"Аниқати камтарин: ".concat(t.min);return}if(void 0!==t.max&&s>t.max){n[e]=t.message||"Аниқати бештарин: ".concat(t.max);return}}}),e({errors:n}),0===Object.keys(n).length}})),o=(0,n.v)(()=>({getItems:async(e,t)=>{try{return(await a.A.get("".concat(e).concat(t?"/".concat(t):""))).data}catch(e){return console.error(e),null}}}))},9690:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>l});var a=r(5155);r(2115);var n=r(4871),s=r(8262),o=r(2376),i=r(5695);function l(){let e=(0,i.useRouter)(),{data:t,errors:r,setData:l,validate:c}=(0,s.x)(),u=async()=>{if(c({email:{required:!0},password:{required:!0,minLength:4}}))try{let r=await o.A.post("/auth/login",t);console.log("res login:",r.data);let{token:a}=r.data;localStorage.setItem("token",a),e.replace("/")}catch(e){console.error(e)}};return(0,a.jsx)("div",{className:"login",children:(0,a.jsxs)("div",{className:"login-content",children:[(0,a.jsx)("h1",{children:"Login"}),(0,a.jsxs)("div",{children:[(0,a.jsx)(n.A,{title:"E-mail",required:!0,id:"login-input-email",value:(null==t?void 0:t.email)||"",error:r,onChange:e=>l("email",e),placeholder:"email"}),(0,a.jsx)(n.A,{title:"Password",required:!0,id:"login-input-password",value:(null==t?void 0:t.password)||"",error:r,type:"password",onChange:e=>l("password",e),placeholder:"password"})]}),(0,a.jsx)("button",{onClick:u,children:"Вход"})]})})}}},e=>{var t=t=>e(e.s=t);e.O(0,[604,441,684,358],()=>t(970)),_N_E=e.O()}]);