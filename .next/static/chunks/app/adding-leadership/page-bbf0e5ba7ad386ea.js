(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[434],{2376:(e,t,n)=>{"use strict";n.d(t,{A:()=>l});var r=n(3464);let a=()=>localStorage.getItem("token"),i=r.A.create({baseURL:"https://adminapi.kvkd.tj/",headers:"application/json"});i.interceptors.request.use(e=>{let t=a();return t&&(e.headers.Authorization="Bearer ".concat(t)),e},e=>Promise.reject(e)),i.interceptors.response.use(e=>e,e=>{var t;return(null==(t=e.response)?void 0:t.status)===401&&(document.location.href="./login",console.warn("Unauthorized, redirecting to login...")),Promise.reject(e)});let l=i},3664:(e,t,n)=>{Promise.resolve().then(n.bind(n,8876))},4014:(e,t,n)=>{"use strict";n.d(t,{A:()=>l});var r=n(5155),a=n(2115);let i=e=>{let{initialContent:t="",onContentChange:n,className:i=""}=e,l=(0,a.useRef)(null),[o,s]=(0,a.useState)(!1);(0,a.useEffect)(()=>{l.current&&t&&(l.current.innerHTML=t)},[]),(0,a.useEffect)(()=>{l.current&&0===t.length&&(l.current.innerHTML="")},[t]);let c=e=>{let t=window.getSelection();if(!(null==t?void 0:t.rangeCount)||!l.current)return;let n=t.getRangeAt(0);if(!t.toString())return;let r=document.createElement("div");r.appendChild(n.cloneContents());let a=!1,i=t=>{if(t.nodeType===Node.ELEMENT_NODE){if("bold"===e&&("bold"===t.style.fontWeight||"B"===t.tagName||"STRONG"===t.tagName)||"italic"===e&&("italic"===t.style.fontStyle||"I"===t.tagName||"EM"===t.tagName)||"underline"===e&&("underline"===t.style.textDecoration||"U"===t.tagName))return!0;for(let e=0;e<t.childNodes.length;e++)if(i(t.childNodes[e]))return!0}return!1};a=i(r);let o=d();a?document.execCommand("removeFormat",!1,e):document.execCommand(e,!1),h(),null!==o&&u(o)},d=()=>{let e=window.getSelection();if(!(null==e?void 0:e.rangeCount)||!l.current)return null;let t=e.getRangeAt(0),n=t.cloneRange();return n.selectNodeContents(l.current),n.setEnd(t.endContainer,t.endOffset),n.toString().length},u=e=>{if(!l.current)return;let t=window.getSelection(),n=document.createRange(),r=0,a=!1,i=t=>{if(t.nodeType===Node.TEXT_NODE){var l;let i=r+((null==(l=t.nodeValue)?void 0:l.length)||0);if(!a&&e>=r&&e<=i){let i=e-r;return n.setStart(t,i),n.setEnd(t,i),a=!0,!0}r=i}else for(let e=0;e<t.childNodes.length;e++)if(i(t.childNodes[e]))return!0;return!1};i(l.current),a&&(null==t||t.removeAllRanges(),null==t||t.addRange(n))},h=()=>{l.current&&n&&n(l.current.innerHTML)};return console.log("initialContent",t),(0,r.jsxs)("div",{className:"editor-container ".concat(i),children:[(0,r.jsxs)("div",{className:"toolbar",children:[(0,r.jsx)("button",{onClick:()=>c("bold"),title:"Жирный (Ctrl+B)",children:(0,r.jsx)("b",{children:"B"})}),(0,r.jsx)("button",{onClick:()=>c("italic"),title:"Курсив (Ctrl+I)",children:(0,r.jsx)("i",{children:"I"})}),(0,r.jsx)("button",{onClick:()=>c("underline"),title:"Подчеркивание (Ctrl+U)",children:(0,r.jsx)("u",{children:"U"})})]}),(0,r.jsx)("div",{ref:l,contentEditable:!0,className:"editable-area ".concat(o?"focused":""),onInput:h,onBlur:()=>s(!1),onFocus:()=>s(!0),onPaste:e=>{e.preventDefault();let t=e.clipboardData.getData("text/plain");document.execCommand("insertText",!1,t)},suppressContentEditableWarning:!0})]})};function l(e){let{title:t,error:n,id:a,value:l,required:o,classNameLabel:s,classNameTitle:c,classNameError:d,onChange:u}=e;return console.log("value",l),(0,r.jsxs)("label",{htmlFor:a,className:"input ".concat(s||""),children:[(0,r.jsxs)("h3",{className:" ".concat(c||""),children:[t," ",(0,r.jsx)("span",{children:o?"*":""})]}),(0,r.jsx)(i,{initialContent:l,onContentChange:e=>u(e)}),(0,r.jsx)("p",{style:{opacity:(null==n||n[a],1)},className:"".concat(d||"")})]})}},4871:(e,t,n)=>{"use strict";n.d(t,{A:()=>a});var r=n(5155);function a(e){let{title:t,error:n,id:a,type:i="text",value:l,required:o,placeholder:s,classNameLabel:c,classNameTitle:d,classNameInput:u,classNameError:h,onChange:m}=e;return(0,r.jsxs)("label",{htmlFor:a,className:"input ".concat(c||""),children:[(0,r.jsxs)("h3",{className:" ".concat(d||""),children:[t," ",(0,r.jsx)("span",{children:o?"*":""})]}),(0,r.jsx)("input",{className:"".concat(u||""),type:i,placeholder:s,id:a,onChange:e=>m(e.target.value),value:l}),(0,r.jsx)("p",{style:{opacity:(null==n||n[a],1)},className:"".concat(h||"")})]})}n(2115)},7861:(e,t,n)=>{"use strict";n.d(t,{A:()=>l});var r=n(5155),a=n(8262),i=n(2376);function l(e){let{id:t,title:n,value:l,error:o,width:s,height:c,className:d,index:u,childrenKey:h,keyData:m}=e,{setData:p,data:g}=(0,a.x)(),f=async(e,t)=>{var n;let r=null==(n=e.target.files)?void 0:n[0];if(!r)return void console.error("No file selected");e.target.value="";let a=new FormData;a.append("file",r);try{let e=await i.A.post("/files/upload",a,{headers:{"Content-Type":"multipart/form-data"}});p(t,e.data.id)}catch(e){console.error("Upload error:",e)}},v=async(e,t,n,r)=>{var a;let l=null==(a=e.target.files)?void 0:a[0];if(!l)return void console.error("No file selected");let o=new FormData;o.append("file",l);let s=await i.A.post("/files/upload",o,{headers:{"Content-Type":"multipart/form-data"}});if(r){let e=Array.isArray(g.content)?[...g.content]:[];e[n]&&(e[n][r]=s.data.id),p(t,e)}else p(t,s.data.id)};return(0,r.jsxs)("div",{className:"file-photo ".concat(d),style:{width:s||"auto"},children:[(0,r.jsx)("label",{htmlFor:t,onClick:()=>{if(l)if(0===u||u){let e=Array.isArray(g.content)?[...g.content]:[];e[u]&&(e[u][h]=""),p(m||t,e)}else p(m||t,"")},children:l?"Нест кардан":n}),(0,r.jsx)("input",{type:"file",id:t,onChange:e=>{console.log("index",u),0===u||u?v(e,m||t,u,h):f(e,m||t)}}),l&&(0,r.jsx)("img",{src:"string"==typeof l?"https://adminapi.kvkd.tj/files/"+l:l,alt:t,width:s||300,height:c||300}),(0,r.jsx)("p",{className:"error",style:{opacity:+(null!=o&&!!o[t])},children:null==o?void 0:o[m||t]})]})}n(2115)},8262:(e,t,n)=>{"use strict";n.d(t,{t:()=>l,x:()=>i});var r=n(2376),a=n(5453);let i=(0,a.v)((e,t)=>({data:{},errors:{},setData:(t,n)=>e(e=>({data:{...e.data,[t]:n}})),setClear:()=>e(()=>({data:{}})),setDataMony:t=>e(()=>({data:t})),resetErrors:()=>e({errors:{}}),validate:n=>{let{data:r}=t(),a={};return Object.keys(n).forEach(e=>{let t=n[e],i=r[e];if(t.required&&(""===i||null==i)){a[e]=t.message||" Ин ҷои ҳатмист";return}if("string"==typeof i){if(t.minLength&&i.length<t.minLength){a[e]=t.message||"Камтар аз ".concat(t.minLength," аломат набояд бошад");return}if(t.maxLength&&i.length>t.maxLength){a[e]=t.message||"Аз ".concat(t.maxLength," аломат зиёд набояд бошад");return}if(t.pattern&&!t.pattern.test(i)){a[e]=t.message||"Формати нодуруст";return}}if("number"==typeof i){if(void 0!==t.min&&i<t.min){a[e]=t.message||"Аниқати камтарин: ".concat(t.min);return}if(void 0!==t.max&&i>t.max){a[e]=t.message||"Аниқати бештарин: ".concat(t.max);return}}}),e({errors:a}),0===Object.keys(a).length}})),l=(0,a.v)(()=>({getItems:async(e,t)=>{try{return(await r.A.get("".concat(e).concat(t?"/".concat(t):""))).data}catch(e){return console.error(e),null}}}))},8876:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>d});var r=n(5155),a=n(7861),i=n(4871),l=n(4014),o=n(8262),s=n(2376),c=n(2115);function d(){var e;let{data:t,errors:n,setData:d,validate:u}=(0,o.x)(),h=async()=>{if(u({main_title:{required:!0},main_photo_id:{required:!0}}))try{await s.A.post("/leadership/add",t).then(()=>{d("main_title",""),d("main_photo_id",""),d("content",[{description:"",photo_id:""}])})}catch(e){console.error("Error sending data:",e)}else console.log("Form validation failed:",n)};return(0,c.useEffect)(()=>{d("content",[{description:"",photo_id:""}])},[]),(0,r.jsx)("div",{className:"adding",children:(0,r.jsxs)("div",{className:"adding-content",children:[(0,r.jsxs)("div",{className:"main-form",children:[(0,r.jsxs)("div",{className:"adding-header",children:[(0,r.jsx)("h1",{children:"Илова"}),(0,r.jsx)("button",{onClick:h,children:"Фиристодан"})]}),(0,r.jsxs)("div",{className:"adding-form",children:[(0,r.jsx)(i.A,{required:!0,title:" Сарлавҳа",type:"text",placeholder:" Сарлавҳа",id:"main_title",value:(null==t?void 0:t.main_title)||"",onChange:e=>d("main_title",e),error:n}),(0,r.jsx)("div",{children:(0,r.jsx)(a.A,{keyData:"main_photo_id",id:"main_photo_id_label",title:"Аксро бор кардан",value:null==t?void 0:t.main_photo_id,error:n})})]})]}),(0,r.jsxs)("div",{className:"adding-form-content",children:[Array.isArray(null==t?void 0:t.content)&&(null==t||null==(e=t.content)?void 0:e.map((e,i,o)=>(0,r.jsxs)("div",{className:"adding-form-item",children:[(0,r.jsx)(l.A,{title:"Тавсиф",id:"description",placeholder:"Тавсиф",value:e.description,error:n,required:!0,onChange:e=>{let n=Array.isArray(t.content)?[...t.content]:[];n[i]&&(n[i].description=e,d("content",n))}}),(0,r.jsxs)("div",{children:[(0,r.jsx)(a.A,{keyData:"content",id:"content-".concat(i),index:i,childrenKey:"photo_id",title:"Аксро бор кардан",value:null==e?void 0:e.photo_id,error:n}),0!==i&&(0,r.jsx)("button",{onClick:()=>{d("content",o.filter((e,t)=>t!==i))},children:"-"})]})]},i))),(0,r.jsx)("button",{onClick:()=>{let e=Array.isArray(t.content)?[...t.content]:[];e.push({description:"",photo_id:""}),d("content",e)},children:"Илова кардани унсур"})]})]})})}}},e=>{var t=t=>e(e.s=t);e.O(0,[604,441,684,358],()=>t(3664)),_N_E=e.O()}]);